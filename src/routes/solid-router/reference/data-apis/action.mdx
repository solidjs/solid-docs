---
title: action
---

The `action` function wraps an asynchronous function and returns an action.
Actions enable data mutations and side effects, often in response to user interactions such as form submissions.
To learn more about actions, see [the actions documentation](/solid-router/concepts/actions).

```tsx
import { action } from "@solidjs/router";

const addTodoAction = action(async (name: string) => {
	await fetch("https://api.com/todos", {
		method: "POST",
		body: JSON.stringify({ name }),
	});
});
```

## Forms

Actions can be used to handle form submissions by passing them to the `action` prop in the [`<form>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/form) element.
The form values will be accessible through the first parameter of the action function, which is a [`FormData`](https://developer.mozilla.org/en-US/docs/Web/API/FormData) object.

Please note that the `<form>` element **must** have `method="post"`.
When using Server-Side Rendering (SSR), you must provide a unique name as the second parameter to the action function.

```tsx
import { action } from "@solidjs/router";

const addTodoAction = action(async (formData: FormData) => {
	const name = formData.get("name")?.toString();
	await fetch("https://api.com/todos", {
		method: "POST",
		body: JSON.stringify({ name }),
	});
}, "add-todo");

function TodoForm() {
	return (
		<form action={addTodoAction} method="post">
			<input name="name" />
			<button>Add todo</button>
		</form>
	);
}
```

### The `with` method

Actions have a `with` method that is used to pass additional arguments to the action.
The parameters passed to the `with` method are forwarded to the action function in the same order.
The `FormData` is still available as the last parameter.

```tsx
import { action } from "@solidjs/router";

const addTodoAction = action(async (userId: number, formData: FormData) => {
	const name = formData.get("name")?.toString();
	await fetch("https://api.com/todos", {
		method: "POST",
		body: JSON.stringify({ userId, name }),
	});
});

function TodoForm() {
	const userId = 1;
	return (
		<form action={addTodoAction.with(userId)} method="post">
			<input name="name" />
			<button>Add todo</button>
		</form>
	);
}
```

## Response helpers

Solid Router provides three response helpers that customize the behavior of the action:

- [`json`](/solid-router/reference/response-helpers/json): Allows returning JSON from the action, which will be accessible as the return value when invoking the action using [`useAction`](/solid-router/reference/data-apis/use-action).
- [`redirect`](/solid-router/reference/response-helpers/redirect): Performs a redirect.
- [`reload`](/solid-router/reference/response-helpers/reload): Revalidates queries.

Response helpers return a [`Response`](https://developer.mozilla.org/en-US/docs/Web/API/Response) object with custom properties recognized by Solid Router.
When a `Response` object is either returned or thrown from an action function, Solid Router handles it automatically.
It's advised not to construct a `Response` object without using response helpers.

```jsx
type Submission<T, U> = {
  input: T;
  result: U;
  error: any;
  pending: boolean
  clear: () => {}
  retry: () => {}
}

const submissions = useSubmissions(action, (input) => filter(input));
const submission = useSubmission(action, (input) => filter(input));

```

##  Revalidate cached functions

###  Revalidate all (default)
By default, all cached functions will be revalidated whether the action returns no response or a "normal" response.

```jsx

const deleteTodo = action(async (formData: FormData) => {
  const id = Number(formData.get("id"))
  await api.deleteTodo(id)
  // ...
  return new  Response("success",  {  status:  200  });
})
```

### Revalidate specific cached keys

By returning a response with solid-router's `json`, `reload` or `redirect` helpers you can pass a key / keys to the revalidate prop as the second argument of the json response helper.
You can either pass as `string` directly or use the cached functions `key` or `keyFor` props.

```jsx
import { action, json, reload, redirect } from "@solidjs/router"

const deleteTodo = action(async (formData: FormData) => {
  const id = Number(formData.get("id"))
  await api.deleteTodo(id)
  return json(
  { deleted: id },
  { revalidate: ["getAllTodos", getTodos.key, getTodoByID.keyFor(id)]}
  )

  //or
  return reload({ revalidate: ["getAllTodos", getTodos.key, getTodoByID.keyFor(id)]})

  //or
  return redirect("/", { revalidate: ["getAllTodos", getTodos.key, getTodoByID.keyFor(id)]})

})

```

## Prevent revalidation
To opt out of any revalidation you can pass any `string` to revalidate which is not a key of any cached function.

```jsx
const deleteTodo = action(async (formData: FormData) => {
  const id = Number(formData.get("id"))
  await api.deleteTodo(id)
  // returns a `json` without revalidating the action.
  return json(`deleted ${id}`,{ revalidate: "nothing" })

  // or reload the route without revalidating the request.
  return reload({ revalidate: "nothing" })

 // or redirect without revalidating
 return redirect("/", { revalidate: "nothing" })
})

```

###  Revalidate without action

Cached functions can also be revalidated by the  `revalidate` helper.

```jsx
revalidate([getTodos.key, getTodoByID.keyFor(id)])

```

This is also great if you want to set your own "refresh" interval e.g. poll data every 30 seconds.

```jsx
export default function TodoLayout(){
	
	const todos = createAsync(() => getTodos())
	
	onMount(() => {
		//30 second polling
		const interval = setInterval(() => revalidate(getTodos.key),1000 * 30)
		onCleanup(() => clearInterval(interval))
	})
	
	// ...
}

```
