```ts
import { onCleanup, type Accessor } from "solid-js";

export const clickOutside = (
  node: HTMLElement,
  handlerAccessor: Accessor<((ev: ClickEvent) => void) | undefined>
) => {
  const handler = (ev: ClickEvent) =>
    node.contains(ev.target) || handlerAccessor()?.(ev);
  document.body.addEventListener("click", handler);
  onCleanup(() => document.body.removeEventListener("click", handler));
}
```